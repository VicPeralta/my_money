
<div>
  <%= form_for(resource, as: resource_name, 
    data: { turbo: false }, 
    url: registration_path(resource_name)) do |f| %>
    <%= render partial:'shared/back_form', 
      locals: {title: "Sign up", form: f, button: "Next", back: root_path}
    %>
    <div class="field">
      <div class="flex row align-center margin-10">
        <img src=<%=image_path("user.png")%> id='image-file' class="img-w60"/>
        <label id="label-for-image" for="user_image" class="color-white font-large margin-left-10 underlined">Upload picture </label>
        <%= f.file_field :image, accept: 'image/png,image/jpeg', class:"inputfile" %>
      </div>
      <%= f.text_field :name, autofocus: true, autocomplete: "name", placeholder: "Ful name" %>
      <%= f.email_field :email, autofocus: true, autocomplete: "email", placeholder: "Email" %>
      <%= f.password_field :password, autocomplete: "new-password", placeholder: "Password" %>
    </div>
    <%= render "devise/shared/error_messages", resource: resource %>
  <% end %>
</div>
<script>
  document.getElementById('user_image').addEventListener('change', (e) => {
    const file = e.target.files[0];
      document.getElementById('label-for-image').textContent = file.name;
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = readerEvent => {
        document.getElementById('image-file').src = reader.result;
      }
  });
</script>
